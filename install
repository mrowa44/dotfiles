#!/bin/bash

# curl https://raw.githubusercontent.com/mrowa44/dotfiles/master/install | bash

# Install Homebrew
which -s brew
if [[ $? != 0 ]] ; then
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

# Install all stuff
brew install vim --with-override-system-vi
brew install\
  ag\
  cask\
  ccat\
  ctags\
  diff-so-fancy\
  docker\
  fzf\
  git\
  hadolint\
  httpie\
  jq\
  ngrep\
  node\
  nvm\
  peco\
  postgresql\
  progress\
  python\
  reattach-to-user-namespace\
  redis\
  tidy-html5\
  tig\
  tldr\
  tmux\
  tree\
  watch\
  yarn\
  z\
  https://raw.github.com/gleitz/howdoi/master/howdoi.rb

# Apps
brew cask install\
  Caskroom/versions/safari-technology-preview\
  alfred\
  caffeine\
  firefox\
  firefoxnightly\
  flux\
  flycut\
  gimp\
  goofy\
  google-chrome-canary\
  google-chrome\
  iterm2\
  macvim\
  monosnap\
  notational-velocity\
  postman\
  psequel\
  qnapi\
  sequel-pro\
  slack\
  spotify\
  thyme\
  tomighty\
  virtualbox\
  vlc\
  wireshark

# Quick look plugins
brew cask install\
  qlcolorcode \
  qlstephen \
  qlmarkdown \
  quicklook-json \
  quicklook-csv \
  betterzipql \
  qlimagesize \
  qlvideo

# Clone dotfiles
dir="$HOME/dotfiles"
if [ ! -d $dir ]; then
  cd $HOME
  git clone --recursive git@github.com:mrowa44/dotfiles.git
fi

[ -d ~/Projects ] || mkdir ~/Projects

# Change shell to zsh
zsh_path=`which zsh`
if [ $SHELL != $zsh_path ]; then
  chsh -s $zsh_path
  git clone --recursive https://github.com/sorin-ionescu/prezto.git "${ZDOTDIR:-$HOME}/.zprezto"
fi

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
ln -sf ${DIR}/zshrc ~/.zshrc
ln -sf ${DIR}/zpreztorc ~/.zpreztorc
ln -sf ${DIR}/zsh ~/.zsh
ln -sf ${DIR}/vimrc ~/.vimrc
ln -sf ${DIR}/vim ~/.vim
ln -sf ${DIR}/gitconfig ~/.gitconfig
ln -sf ${DIR}/gitignore ~/.gitignore
ln -sf ${DIR}/tmux.conf ~/.tmux.conf
ln -sf ${DIR}/psqlrc ~/.psqlrc
ln -sf ${DIR}/ctags ~/.ctags
ln -sf ${DIR}/agignore ~/.agignore
ln -sf ${DIR}/gemrc ~/.gemrc
ln -sf ${DIR}/eslintrc.js ~/.eslintrc.js
ln -sf ${DIR}/my.cnf ~/.my.cnf

# xcode-select --install
# rvm get stable --auto-dotfiles

# Create locate db
# sudo launchctl load -w /System/Library/LaunchDaemons/com.apple.locate.plist

# Enable filevault
# sudo fdesetup enable

# chrome://flags/#enable-javascript-harmony
# chrome://flags/#automatic-tab-discarding
# https://www.amazon.com/gp/sendtokindle/mac

yarn global add eslint fast-cli yolo-cli csslint jsonlint sass-lint
